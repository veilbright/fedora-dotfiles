# Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term kitty
set $pdf zathura
set $password flatpak run com.bitwarden.desktop
set $calc qalc
set $tui kitty -o placement_strategy=center -o background=#29263c -o single_window_padding_width=8 -o confirm_os_window_close=0
set $browser firefox
set $ai firefox -p kiosk claude.ai
set $editor code
set $rofi_cmd rofi -terminal '$term'
set $menu $rofi_cmd -modes 'drun,run' -show drun
set $scratchpad_toggle /home/jhor/dotfiles/sway/dot-config/sway/scratchpad_toggle.sh
set $screenshot /home/jhor/dotfiles/sway/dot-config/sway/screenshot.sh

# Output
    output eDP-1 pos 640 1080 scale 1.5
    output DP-3 pos 0 0

    workspace 1 output eDP-1
    exec swaymsg workspace number 1

# Input
    input type:touchpad scroll_factor 0.25
    input type:pointer accel_profile flat
    input type:keyboard repeat_delay 250
    input type:keyboard repeat_rate 25

    input 16700:9485:Dell_Mouse pointer_accel -0.3
    input 16700:9485:Dell_Mouse_MS3320W_Mouse pointer_accel -0.3

# Key bindings
    bindsym $mod+Return exec $term
    bindsym $mod+Shift+q kill
    bindsym $mod+d exec $menu
    bindsym $mod+b exec $browser
    bindsym $mod+Shift+c reload
    bindsym $mod+Ctrl+l exec systemctl suspend
    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

    # Open bindings
    bindsym $mod+p exec 'file=$(fd -e pdf --base-directory ~ | rofi -dmenu -p "$pdf"); if [ -n "$file" ]; then "$pdf" "$HOME/$file"; fi'
    bindsym $mod+Shift+p exec 'file=$(fd -H -I -e pdf --base-directory ~ | rofi -dmenu -p "$pdf"); if [ -n "$file" ]; then "$pdf" "$HOME/$file"; fi'
    bindsym $mod+o exec 'dir=$(fd -t d --base-directory ~ | rofi -dmenu -p "$editor"); if [ -n "$dir" ]; then "$editor" "$HOME/$dir"; fi'
    bindsym $mod+Shift+o exec 'file=$(fd -t f -t l --base-directory ~ | rofi -dmenu -p "$editor"); if [ -n "$file" ]; then "$editor" "$HOME/$file"; fi'

    bindsym $mod+c exec $scratchpad_toggle -w 600 -h 400 $tui $calc
    bindsym $mod+a exec $scratchpad_toggle -w 1000 -h 700 $ai
    bindsym $mod+equal exec $browser -p kiosk

    # Command bindings
    bindsym $mod+Ctrl+c exec 'grim -g "$(XCURSOR_SIZE=1 slurp -p -b "#00000000")" -t ppm - | magick - -format "%[pixel:p{0,0}]" txt:- | sed -nE "2s/.*(#.{6}).*/\1/;2p" | tee >(xargs notify-send) | wl-copy -n'
    bindsym $mod+backslash exec $screenshot
    bindsym $mod+Shift+backslash exec wl-paste | imv &> /dev/null

    # toggle primary and secondary
    bindsym $mod+grave exec ~/dotfiles/sway/dot-config/sway/primary_toggle.sh
    bindsym $mod+z exec swaymsg "mark --add primary"
    bindsym $mod+x exec swaymsg "mark --add secondary"

    floating_modifier $mod normal

# Navigation
    # Move your focus
    bindsym $mod+$left focus left
    bindsym $mod+$down focus down
    bindsym $mod+$up focus up
    bindsym $mod+$right focus right

    bindsym $mod+left focus left
    bindsym $mod+down focus down
    bindsym $mod+up focus up
    bindsym $mod+right focus right

    bindsym $mod+tab focus next
    bindsym $mod+Shift+tab focus prev

    # Move the focused window
    bindsym $mod+Shift+$left move left
    bindsym $mod+Shift+$down move down
    bindsym $mod+Shift+$up move up
    bindsym $mod+Shift+$right move right

    bindsym $mod+Shift+left move left
    bindsym $mod+Shift+down move down
    bindsym $mod+Shift+up move up
    bindsym $mod+Shift+right move right

    bindsym $mod+m move workspace output up
    bindsym $mod+Comma move container output up

# Workspaces
    # Switch to workspace
    bindsym $mod+1 workspace number 1
    bindsym $mod+2 workspace number 2
    bindsym $mod+3 workspace number 3
    bindsym $mod+4 workspace number 4
    bindsym $mod+5 workspace number 5
    bindsym $mod+6 workspace number 6
    bindsym $mod+7 workspace number 7
    bindsym $mod+8 workspace number 8
    bindsym $mod+9 workspace number 9
    bindsym $mod+0 workspace number 10

    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number 1
    bindsym $mod+Shift+2 move container to workspace number 2
    bindsym $mod+Shift+3 move container to workspace number 3
    bindsym $mod+Shift+4 move container to workspace number 4
    bindsym $mod+Shift+5 move container to workspace number 5
    bindsym $mod+Shift+6 move container to workspace number 6
    bindsym $mod+Shift+7 move container to workspace number 7
    bindsym $mod+Shift+8 move container to workspace number 8
    bindsym $mod+Shift+9 move container to workspace number 9
    bindsym $mod+Shift+0 move container to workspace number 10

# Layout
    bindsym $mod+s layout stacking
    bindsym $mod+w layout tabbed
    bindsym $mod+e layout toggle split
    bindsym $mod+f fullscreen

    bindsym $mod+space floating toggle
    bindsym $mod+Shift+space focus mode_toggle

# Appearance
    default_border pixel 2
    smart_borders no_gaps
    titlebar_padding 4 1
    titlebar_border_thickness 1
    mouse_warping container
    font "pango:Inter Regular" 10
    seat seat0 xcursor_theme "Adwaita" 24

# Scratchpad
    bindsym $mod+Shift+minus move scratchpad
    bindsym $mod+minus scratchpad show

# Set floating
    for_window [title="floating"] floating enable

# Resizing
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Shift+$left resize shrink width 40px
    bindsym Shift+$down resize grow height 40px
    bindsym Shift+$up resize shrink height 40px
    bindsym Shift+$right resize grow width 40px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # Return to default mode
    bindsym $mod+r mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Kill unresponsive applications
mode "kill" {
    bindsym $mod+Shift+q kill -s KILL $(swaymsg -t get_tree | jq '.. | select(.type?) | select(.focused==true) | .pid')
    bindsym $mod+t mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+t mode "kill"

# Brightness
    bindsym XF86MonBrightnessDown exec brightnessctl -q set ${STEP:-5}%-
    bindsym XF86MonBrightnessUp exec brightnessctl -q set +${STEP:-5}%

include '$(/usr/libexec/sway/layered-include "/usr/share/sway/config.d/*.conf" "/etc/sway/config.d/*.conf" "${XDG_CONFIG_HOME:-$HOME/.config}/sway/config.d/*.conf")'
